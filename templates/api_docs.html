{% extends "base.html" %}

{% block content %}
<section class="api-docs-section">
    <div class="container">
        <div class="section-header">
            <h2>API Documentation</h2>
            <p>This tool provides a simple and easy-to-use API that can be integrated into your application for automated parsing and conversion of curl commands.</p>
        </div>
        
        <div class="api-docs-content">
            <div class="api-section">
                <h3>API Endpoint</h3>
                <div class="endpoint">
                    <h4>POST /api/convert</h4>
                    <div class="endpoint-details">
                        <p>Use the following HTTP request method and path to access the API:</p>
                        <pre><code class="bash">POST https://curl-to.com/api/convert</code></pre>
                    </div>
                </div>
            </div>
            
            <div class="api-section">
                <h3>Request Format</h3>
                <p>The request body should be in JSON format, containing a `curl` field with the curl command string to be parsed:</p>
                <div class="request-example">
                    <h4>Request Example</h4>
                    <pre><code class="json">{
  "curl": "curl -X POST https://api.example.com/users -H 'Content-Type: application/json' -d '{\"name\":\"John\",\"email\":\"john@example.com\"}'"
}</code></pre>
                </div>
            </div>
            
            <div class="api-section">
                <h3>Response Format</h3>
                <p>The response is a structured JSON object containing the following fields:</p>
                <ul>
                    <li><strong>method</strong> - HTTP request method</li>
                    <li><strong>url</strong> - Request URL</li>
                    <li><strong>headers</strong> - Request headers</li>
                    <li><strong>data</strong> - Request data</li>
                </ul>
                <div class="response-example">
                    <h4>Response Example</h4>
                    <pre><code class="json">{
  "method": "POST",
  "url": "https://api.example.com/users",
  "headers": {
    "Content-Type": "application/json"
  },
  "data": {
    "name": "John",
    "email": "john@example.com"
  }
}</code></pre>
                </div>
            </div>
            
            <div class="api-section">
                <h3>Usage Examples</h3>
                
                <div class="code-example">
                    <h4>Python</h4>
                    <pre><code class="python">import requests
import json

url = "https://curl-to.com/api/convert"
payload = {
    "curl": "curl -X POST https://api.example.com/users -H 'Content-Type: application/json' -d '{\"name\":\"John\",\"email\":\"john@example.com\"}'"
}

response = requests.post(url, json=payload)
result = response.json()
print(json.dumps(result, indent=2))</code></pre>
                </div>
                
                <div class="code-example">
                    <h4>JavaScript</h4>
                    <pre><code class="javascript">const url = 'https://curl-to.com/api/convert';
const payload = {
  curl: `curl -X POST https://api.example.com/users -H 'Content-Type: application/json' -d '{"name":"John","email":"john@example.com"}'`
};

fetch(url, {
  method: 'POST',
  headers: {
    'Content-Type': 'application/json',
  },
  body: JSON.stringify(payload),
})
.then(response => response.json())
.then(data => console.log(data))
.catch(error => console.error('Error:', error));</code></pre>
                </div>
                
                <div class="code-example">
                    <h4>PHP</h4>
                    <pre><code class="php">&lt;?php
$url = 'https://curl-to.com/api/convert';
$payload = [
    'curl' => 'curl -X POST https://api.example.com/users -H \'Content-Type: application/json\' -d \'{"name":"John","email":"john@example.com"}\''
];

$options = [
    'http' => [
        'method'  => 'POST',
        'header'  => 'Content-Type: application/json',
        'content' => json_encode($payload)
    ]
];

$context  = stream_context_create($options);
$result = file_get_contents($url, false, $context);
$response = json_decode($result, true);

print_r($response);
?&gt;</code></pre>
                </div>
            </div>
        
        </div>
    </div>
</section>
{% endblock %}

{% block scripts %}
<script>
    document.addEventListener('DOMContentLoaded', function() {
        // 初始化代码高亮
        document.querySelectorAll('pre code').forEach((block) => {
            hljs.highlightBlock(block);
        });
    });
</script>
{% endblock %}