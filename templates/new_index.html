{% extends "base.html" %}

{% block content %}
<section class="converter-section">
    <div class="container">
        <div class="converter-header">
            {% if target_language is defined %}
                {% if target_language == "python" %}
                    <h1>Convert CURL to Python | CURL to Python Converter</h1>
                    <p>Transform CURL commands to Python code with our free online converter. Perfect for requests, API testing and integration.</p>
                {% elif target_language == "javascript" %}
                    <h1>Convert CURL to JavaScript | CURL to JS Converter</h1>
                    <p>Transform CURL commands to JavaScript code with our free online converter. Perfect for fetch API, Axios and Node.js.</p>
                {% elif target_language == "php" %}
                    <h1>Convert CURL to PHP | CURL to PHP Converter</h1>
                    <p>Transform CURL commands to PHP code with our free online converter. Perfect for API requests and backend integration.</p>
                {% elif target_language == "java" %}
                    <h1>Convert CURL to Java | CURL to Java Converter</h1>
                    <p>Transform CURL commands to Java code with our free online converter. Perfect for HttpClient, OkHttp and API integration.</p>
                {% elif target_language == "csharp" %}
                    <h1>Convert CURL to C# | CURL to C# Converter</h1>
                    <p>Transform CURL commands to C# code with our free online converter. Perfect for HttpClient, RestSharp and .NET integration.</p>
                {% elif target_language == "ruby" %}
                    <h1>Convert CURL to Ruby | CURL to Ruby Converter</h1>
                    <p>Transform CURL commands to Ruby code with our free online converter. Perfect for API requests and backend integration.</p>
                {% elif target_language == "go" %}
                    <h1>Convert CURL to Go | CURL to Go Converter</h1>
                    <p>Transform CURL commands to Go code with our free online converter. Perfect for API requests and backend integration.</p>
                {% elif target_language == "swift" %}
                    <h1>Convert CURL to Swift | CURL to Swift Converter</h1>
                    <p>Transform CURL commands to Swift code with our free online converter. Perfect for iOS and macOS app development.</p>
                {% elif target_language == "rust" %}
                    <h1>Convert CURL to Rust | CURL to Rust Converter</h1>
                    <p>Transform CURL commands to Rust code with our free online converter. Perfect for API integration and reliable HTTP clients.</p>
                {% endif %}
            {% else %}
                <h1 data-i18n="tool_title">HTTP请求转换器</h1>
                <p data-i18n="tool_description">在不同格式之间转换HTTP请求，支持curl命令、JSON和多种编程语言</p>
            {% endif %}
        </div>
        
        <div class="converter-tabs">
            <div class="tab-buttons">
                <button class="tab-btn active" data-converter="curl-to-anything" data-i18n="btn_curl_to_json">Curl转换</button>
                <button class="tab-btn" data-converter="code-to-curl" data-i18n="btn_code_to_curl">代码转Curl</button>
            </div>
            
            <!-- Curl转换面板 -->
            <div id="curl-to-anything" class="converter-panel active">
                <div class="panel-header">
                    <div class="output-format">
                        <label for="outputFormat" data-i18n="output_format_label">输出格式:</label>
                        <select id="outputFormat" class="select-styled">
                            <option value="json" {% if target_language is not defined %}selected{% endif %} data-i18n="format_json">JSON</option>
                            <option value="python" {% if target_language == "python" %}selected{% endif %} data-i18n="format_python">Python</option>
                            <option value="javascript" {% if target_language == "javascript" %}selected{% endif %} data-i18n="format_javascript">JavaScript</option>
                            <option value="nodejs" {% if target_language == "nodejs" %}selected{% endif %} data-i18n="format_nodejs">Node.js</option>
                            <option value="php" {% if target_language == "php" %}selected{% endif %} data-i18n="format_php">PHP</option>
                            <option value="java" {% if target_language == "java" %}selected{% endif %} data-i18n="format_java">Java</option>
                            <option value="csharp" {% if target_language == "csharp" %}selected{% endif %} data-i18n="format_csharp">C#</option>
                            <option value="rust" {% if target_language == "rust" %}selected{% endif %} data-i18n="format_rust">Rust</option>
                            <option value="swift" {% if target_language == "swift" %}selected{% endif %} data-i18n="format_swift">Swift</option>
                            <option value="go" {% if target_language == "go" %}selected{% endif %} data-i18n="format_go">Go</option>
                            <option value="ruby" {% if target_language == "ruby" %}selected{% endif %} data-i18n="format_ruby">Ruby</option>
                            <option value="swift" data-i18n="format_swift">Swift</option>
                            <option value="go" data-i18n="format_go">Go</option>
                            <option value="ruby" data-i18n="format_ruby">Ruby</option>
                        </select>
                    </div>
                    
                    <div class="examples-dropdown">
                        <label for="curlExamples" data-i18n="examples_label">示例:</label>
                        <select id="curlExamples" class="select-styled">
                            <option value="" data-i18n="examples_select">选择示例</option>
                            <option value="curl -X GET https://api.example.com/users" data-i18n="example_get">简单GET请求</option>
                            <option value="curl -X POST https://api.example.com/users -H 'Content-Type: application/json' -d '{\"name\":\"John\",\"email\":\"john@example.com\"}'" data-i18n="example_post_json">带JSON数据的POST请求</option>
                            <option value="curl -X PUT https://api.example.com/users/123 -H 'Authorization: Bearer token123' -H 'Content-Type: application/json' -d '{\"name\":\"Updated Name\"}'" data-i18n="example_put_auth">带认证的PUT请求</option>
                            <option value="curl -X DELETE https://api.example.com/users/123 -H 'Authorization: Bearer token123'" data-i18n="example_delete">DELETE请求</option>
                            <option value="curl -X POST https://api.example.com/upload -F 'file=@/path/to/file.jpg' -F 'description=Profile picture'" data-i18n="example_form_data">表单数据上传</option>
                        </select>
                    </div>
                </div>
                
                <div class="converter-content">
                    <div class="input-area">
                        <div class="area-header">
                            <h3 data-i18n="input_title">输入Curl命令</h3>
                            <div class="area-actions">
                                <button id="clearBtn" class="btn-secondary" data-i18n="btn_clear">清除</button>
                                <button id="convertBtn" class="btn-primary" data-i18n="btn_convert">转换</button>
                            </div>
                        </div>
                        <textarea id="curlInput" data-i18n-placeholder="input_placeholder" placeholder="在此粘贴您的curl命令，例如: curl -X GET https://api.example.com"></textarea>
                    </div>
                    
                    <div class="output-area">
                        <div class="area-header">
                            <h3 id="outputTitle" data-i18n="output_title">输出结果</h3>
                            <div class="area-actions">
                                <button id="copyBtn" class="btn-secondary" data-i18n="btn_copy">复制</button>
                                <button id="formatBtn" class="btn-secondary" data-i18n="btn_format">格式化</button>
                            </div>
                        </div>
                        <pre><code id="jsonOutput" class="json" data-i18n="output_placeholder">// 转换结果将显示在这里</code></pre>
                    </div>
                </div>
            </div>
            
            <!-- 代码转Curl面板 -->
            <div id="code-to-curl" class="converter-panel">
                <div class="panel-header">
                    <div class="language-selection">
                        <label for="codeLanguage" data-i18n="language_label">代码语言:</label>
                        <select id="codeLanguage" class="select-styled">
                            <option value="python" data-i18n="lang_python">Python</option>
                            <option value="javascript" data-i18n="lang_javascript">JavaScript</option>
                            <option value="php" data-i18n="lang_php">PHP</option>
                        </select>
                    </div>
                    
                    <div class="examples-dropdown">
                        <label for="codeExamples" data-i18n="examples_label">示例:</label>
                        <select id="codeExamples" class="select-styled">
                            <option value="" data-i18n="examples_select">选择示例</option>
                            <option value="python-get" data-i18n="example_python_get">Python - GET请求</option>
                            <option value="python-post" data-i18n="example_python_post">Python - POST请求</option>
                            <option value="javascript-fetch" data-i18n="example_js_fetch">JavaScript - Fetch API</option>
                            <option value="javascript-axios" data-i18n="example_js_axios">JavaScript - Axios</option>
                            <option value="php-curl" data-i18n="example_php_curl">PHP - cURL</option>
                        </select>
                    </div>
                </div>
                
                <div class="converter-content">
                    <div class="input-area">
                        <div class="area-header">
                            <h3 data-i18n="code_input_title">输入代码</h3>
                            <div class="area-actions">
                                <button id="clearCodeBtn" class="btn-secondary" data-i18n="btn_clear">清除</button>
                                <button id="convertCodeBtn" class="btn-primary" data-i18n="btn_convert">转换</button>
                            </div>
                        </div>
                        <textarea id="codeInput" data-i18n-placeholder="code_input_placeholder" placeholder="在此粘贴您的代码"></textarea>
                    </div>
                    
                    <div class="output-area">
                        <div class="area-header">
                            <h3 data-i18n="curl_output_title">Curl命令</h3>
                            <div class="area-actions">
                                <button id="copyCurlBtn" class="btn-secondary" data-i18n="btn_copy">复制</button>
                            </div>
                        </div>
                        <pre><code id="curlOutput" class="bash" data-i18n="curl_output_placeholder">// Curl命令将显示在这里</code></pre>
                    </div>
                </div>
            </div>
            
            <!-- SEO优化：语言转换链接区域 -->
            {% if not target_language %}
            <div class="language-links-section">
                <div class="container">
                    <h2 data-i18n="lang_links_title">转换CURL命令到各种编程语言</h2>
                    <div class="language-links-grid">
                        <div class="language-link-card">
                            <h3><a href="/curl-to-python/">CURL to Python</a></h3>
                            <p data-i18n="python_desc">将CURL命令转换为Python代码，支持requests库</p>
                            <a href="/curl-to-python/" class="btn-link" data-i18n="convert_to_python">转换为Python</a>
                            <a href="/tutorials/curl-to-python/" class="tutorial-link" data-i18n="view_python_tutorial">查看Python教程</a>
                        </div>
                        <div class="language-link-card">
                            <h3><a href="/curl-to-javascript/">CURL to JavaScript</a></h3>
                            <p data-i18n="javascript_desc">将CURL命令转换为JavaScript代码，支持fetch和XMLHttpRequest</p>
                            <a href="/curl-to-javascript/" class="btn-link" data-i18n="convert_to_javascript">转换为JavaScript</a>
                        </div>
                        <div class="language-link-card">
                            <h3><a href="/curl-to-php/">CURL to PHP</a></h3>
                            <p data-i18n="php_desc">将CURL命令转换为PHP代码，支持cURL扩展</p>
                            <a href="/curl-to-php/" class="btn-link" data-i18n="convert_to_php">转换为PHP</a>
                        </div>
                        <div class="language-link-card">
                            <h3><a href="/curl-to-java/">CURL to Java</a></h3>
                            <p data-i18n="java_desc">将CURL命令转换为Java代码，支持HttpClient</p>
                            <a href="/curl-to-java/" class="btn-link" data-i18n="convert_to_java">转换为Java</a>
                        </div>
                        <div class="language-link-card">
                            <h3><a href="/curl-to-csharp/">CURL to C#</a></h3>
                            <p data-i18n="csharp_desc">将CURL命令转换为C#代码，支持HttpClient</p>
                            <a href="/curl-to-csharp/" class="btn-link" data-i18n="convert_to_csharp">转换为C#</a>
                        </div>
                        <div class="language-link-card">
                            <h3><a href="/curl-to-ruby/">CURL to Ruby</a></h3>
                            <p data-i18n="ruby_desc">将CURL命令转换为Ruby代码</p>
                            <a href="/curl-to-ruby/" class="btn-link" data-i18n="convert_to_ruby">转换为Ruby</a>
                        </div>
                        <div class="language-link-card">
                            <h3><a href="/curl-to-go/">CURL to Go</a></h3>
                            <p data-i18n="go_desc">将CURL命令转换为Go代码</p>
                            <a href="/curl-to-go/" class="btn-link" data-i18n="convert_to_go">转换为Go</a>
                        </div>
                        <div class="language-link-card">
                            <h3><a href="/curl-to-swift/">CURL to Swift</a></h3>
                            <p data-i18n="swift_desc">将CURL命令转换为Swift代码</p>
                            <a href="/curl-to-swift/" class="btn-link" data-i18n="convert_to_swift">转换为Swift</a>
                        </div>
                        <div class="language-link-card">
                            <h3><a href="/curl-to-rust/">CURL to Rust</a></h3>
                            <p data-i18n="rust_desc">将CURL命令转换为Rust代码</p>
                            <a href="/curl-to-rust/" class="btn-link" data-i18n="convert_to_rust">转换为Rust</a>
                        </div>
                    </div>
                </div>
            </div>
            {% endif %}
        </div>
    </div>
</section>
{% endblock %}

{% block scripts %}
<script src="{{ url_for('static', filename='js/new_script.js') }}"></script>
<script>
    document.addEventListener('DOMContentLoaded', function() {
        // 初始化代码高亮
        document.querySelectorAll('pre code').forEach((block) => {
            hljs.highlightElement(block);
        });
        
        // 如果用户直接访问根路径，检查其首选语言并重定向
        if (window.location.pathname === '/') {
            const userLang = localStorage.getItem('preferred_language') || navigator.language.split('-')[0];
            const supportedLocales = ['en', 'zh', 'hi', 'fr', 'de', 'es'];
            const locale = supportedLocales.includes(userLang) ? userLang : 'en';
            
            if (window.location.pathname === '/' || window.location.pathname === '/index.html') {
                window.location.href = '/' + locale;
            }
        }
    });
</script>
{% endblock %}
